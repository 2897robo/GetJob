# ğŸ§© Spring MVCì™€ 3ê³„ì¸µ ì•„í‚¤í…ì²˜ êµ¬ì¡° ì™„ì „ ì •ë³µ

> 2025ë…„ 4ì›” 14ì¼ í•™ìŠµ ë‚´ìš© ì •ë¦¬

---

## ğŸ“Œ 1. MVCë€ ë¬´ì—‡ì¸ê°€?

MVCëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ê³„ íŒ¨í„´ ì¤‘ í•˜ë‚˜ë¡œ, **Model-View-Controller**ì˜ ì•½ìë‹¤.

- **Model**: ë°ì´í„°ë¥¼ ë‹´ë‹¹í•œë‹¤. ì˜ˆ) `User`, `Product` ë“± ë„ë©”ì¸ ê°ì²´.
- **View**: ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì§€ëŠ” í™”ë©´. ë³´í†µ HTML(ë˜ëŠ” JSON).
- **Controller**: ì‚¬ìš©ìì˜ ìš”ì²­ì„ ë°›ì•„ ì²˜ë¦¬í•˜ê³ , ì–´ë–¤ Viewë¥¼ ë³´ì—¬ì¤„ì§€ ê²°ì •í•œë‹¤.

### ğŸ”„ ë™ì‘ íë¦„ ìš”ì•½

1. ì‚¬ìš©ìê°€ URL ìš”ì²­ (`/users/1`)
2. DispatcherServletì´ ìš”ì²­ì„ Controllerì—ê²Œ ì „ë‹¬
3. ControllerëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  Modelì— ë°ì´í„°ë¥¼ ë‹´ì•„ Viewì— ì „ë‹¬
4. ViewëŠ” Model ë°ì´í„°ë¥¼ ë Œë”ë§í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ì‘ë‹µ

---

## ğŸ“Œ 2. DispatcherServletì´ë€?

> **Springì˜ Front Controller ì—­í• **

- ì‚¬ìš©ìì˜ ëª¨ë“  ìš”ì²­ì„ ê°€ì¥ ë¨¼ì € ë°›ëŠ”ë‹¤
- ì ì ˆí•œ **Controller, ViewResolver, HandlerMapping**ì„ ì°¾ì•„ ì—°ê²°í•´ì¤€ë‹¤

### ğŸ”§ ë‚´ë¶€ ë™ì‘

1. DispatcherServletì´ ìš”ì²­ì„ ë°›ëŠ”ë‹¤
2. `HandlerMapping`ì„ í†µí•´ ì–´ë–¤ Controller ë©”ì„œë“œê°€ í˜¸ì¶œë ì§€ ê²°ì •
3. Controllerê°€ Modelì— ë°ì´í„° ë‹´ì•„ ë°˜í™˜
4. `ViewResolver`ê°€ ì–´ë–¤ View(HTML í˜¹ì€ JSON ë“±)ë¥¼ ì‚¬ìš©í• ì§€ ê²°ì •
5. Viewì— ë°ì´í„°ë¥¼ ë„˜ê¸°ê³  ìµœì¢… ì‘ë‹µ ë°˜í™˜

---

## ğŸ“Œ 3. HandlerMappingì´ë€?

- URL íŒ¨í„´ì— ë§ëŠ” Controller ë©”ì„œë“œë¥¼ ì°¾ëŠ” ì—­í• 
- ì˜ˆ: `/users/1` â†’ `UserController#getUser(Long id)`ë¡œ ë§¤í•‘

> ë‚´ë¶€ì ìœ¼ë¡œ `@GetMapping`, `@PostMapping` ë“±ì„ í†µí•´ ìë™ ì„¤ì •ë¨

---

## ğŸ“Œ 4. ViewResolverë€?

- Controllerê°€ ë°˜í™˜í•œ "ë¬¸ìì—´ ë·° ì´ë¦„" â†’ ì‹¤ì œ View ê²½ë¡œë¡œ ë³€í™˜

```java
return "user";
```

â†’ src/main/resources/templates/user.htmlë¡œ ë§¤í•‘ë¨ (Thymeleaf ê¸°ì¤€)

---

## ğŸ“Œ 5. Model ê°ì²´ë€?
- Controller â†’ Viewë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê°ì²´

```java
model.addAttribute("user", user);
```

â†’ View(HTML í…œí”Œë¦¿)ì—ì„œëŠ” ${user.name} ì´ëŸ° ì‹ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥

---

## ğŸ“Œ 6. Controller, Service, Repository êµ¬ì¡°

ğŸ§± Controller

```java
@RestController
@RequestMapping("/users")
public class UserController {

	private final UserService userService;

	public UserController(UserService userService) {
		this.userService = userService;
	}

	@GetMapping("/{id}")
	public ResponseEntity<UserDto> getUser(@PathVariable Long id) {
		UserDto user = userService.getUserById(id);
		return ResponseEntity.ok(user);
	}
}
```

- @RestController: JSON í˜•íƒœë¡œ ì‘ë‹µ
- @PathVariable: URLì˜ {id} ê°’ì„ ë§¤í•‘
- ResponseEntity: HTTP ìƒíƒœì½”ë“œê¹Œì§€ ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥

---

ğŸ§  Service

```java
@Service
public class UserService {

	private final UserRepository userRepository;

	public UserService(UserRepository userRepository) {
		this.userRepository = userRepository;
	}

	public UserDto getUserById(Long id) {
		User user = userRepository.findById(id)
			.orElseThrow(() -> new RuntimeException("User not found"));
		return new UserDto(user.getId(), user.getName());
	}
}
```

- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬ ë‹´ë‹¹
- Entity â†’ DTOë¡œ ë³€í™˜ë„ ì—¬ê¸°ì„œ ì²˜ë¦¬
- íŠ¸ëœì­ì…˜, ê²€ì¦ ë“±ë„ ì´ ê³„ì¸µì— ìœ„ì¹˜ì‹œí‚´

---

ğŸ§¬ Repository

```java
@Repository
public interface UserRepository extends JpaRepository<User, Long> {
	// findById, save, deleteById ë“±ì˜ ë©”ì„œë“œ ìë™ ì œê³µë¨
}
```

- JpaRepository<User, Long>:
- User: ì´ Repositoryê°€ ê´€ë¦¬í•  Entity í´ë˜ìŠ¤
- Long: Userì˜ PK íƒ€ì…
- Spring Data JPAê°€ êµ¬í˜„ì²´ ì—†ì´ë„ CRUD ê¸°ëŠ¥ì„ ì œê³µ

---

## ğŸ“Œ 7. DTOë€?

Data Transfer Object

	â€¢ Entityë¥¼ ê·¸ëŒ€ë¡œ ë…¸ì¶œí•˜ì§€ ì•Šê³ , í•„ìš”í•œ ë°ì´í„°ë§Œ ë”°ë¡œ ë½‘ì•„ ì‘ë‹µì— ì‚¬ìš©

```java
public class UserDto {
	private Long id;
	private String name;

	// ìƒì„±ì, Getter ë“±
}
```

ğŸ”¥ ì™œ ì“°ëŠ”ê°€?
- ë¯¼ê°í•œ ì •ë³´(PW ë“±) ë…¸ì¶œ ë°©ì§€
- ì‘ë‹µì— í•„ìš”í•œ ë°ì´í„°ë§Œ ì¶”ë¦¼ â†’ íš¨ìœ¨ â†‘
- API ì‘ë‹µ í¬ë§·ì˜ ìœ ì—°í•œ ì„¤ê³„ ê°€ëŠ¥

â¸»

## ğŸ“Œ 8. ì˜ì¡´ì„± ì£¼ì…(DI)ê³¼ Bean ìƒì„± íë¦„
	â€¢ Springì€ @Controller, @Service, @Repository ë“±ì„ ìŠ¤ìº”í•˜ì—¬ Beanìœ¼ë¡œ ë“±ë¡
	â€¢ ìƒì„±ìì— í•„ìš”í•œ ê°ì²´ë¥¼ ìë™ìœ¼ë¡œ ì£¼ì… (DI)

```java
public UserController(UserService userService) { ... }
```

â†’ new ì—†ì´ë„ ìë™ìœ¼ë¡œ ì£¼ì…ë¨ (Spring IoC ì»¨í…Œì´ë„ˆì˜ ì—­í• )

---

ğŸ¯ ì§€ê¸ˆê¹Œì§€ ë°°ìš´ êµ¬ì¡° ìš”ì•½

```
[ìš”ì²­] â†’ DispatcherServlet
       â†’ HandlerMapping (Controller íƒìƒ‰)
       â†’ Controller (ìš”ì²­ ì²˜ë¦¬ + Model)
       â†’ Service (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
       â†’ Repository (DB ì ‘ê·¼)
       â†’ Model (ë°ì´í„°)
       â†’ ViewResolver â†’ View
[ì‘ë‹µ]
```

---

## âœ¨ ê²°ë¡ 

Spring MVCëŠ” ë‹¨ìˆœí•œ ì›¹ í”„ë ˆì„ì›Œí¬ê°€ ì•„ë‹ˆë¼,
êµ¬ì¡°í™”ëœ ì•„í‚¤í…ì²˜ë¡œ ëŒ€ê·œëª¨ ì„œë¹„ìŠ¤ë„ ì²´ê³„ì ìœ¼ë¡œ ì„¤ê³„í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í”„ë ˆì„ì›Œí¬ë‹¤.
